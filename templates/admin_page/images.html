<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/fontawesome-free-6.0.0-beta3-web/css/all.css' %}">
    <link rel="stylesheet" href="{% static 'css/admin_css/main_copy.css' %}">
    <link rel="stylesheet" href="{% static 'css/admin_css/banner.css' %}">
    <link rel="stylesheet" href="{% static 'css/admin_css/banner_slideShow.css' %}">
    <script src="{% static 'js/jquery-1.9.1.min.js' %}"></script>
    <script src="{% static 'js/toastr.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/admin_css/toastr.min.css' %}">
    <title>Image Panel</title>
</head>

{% if messages %}
<ul class="messages">
    {% for message in messages %}
            {% if message.tags == 'success'%}
                <script type=text/javascript>toastr.{{ message.tags }}('{{ message }}')</script>
            {% elif message.tags == 'info' %}
                <script type=text/javascript>toastr.{{ message.tags }}('{{ message }}')</script>
            {% elif message.tags == 'warning' %}
                <script type=text/javascript>toastr.{{ message.tags }}('{{ message }}')</script>
            {% elif message.tags == 'error' %}
                <script type=text/javascript>toastr.{{ message.tags }}('{{ message }}')</script>
            {% endif %}
    {% endfor %}
</ul>
{% endif %}

<body>

    <!-- navigation bar start -->
    <div class="sc_navbar">
        <div class="sc_header">
            <div class="sc_header_right">
                <a href="#home" class="admin_hello">Hello {{request.user}}</a>
                <a href="{% url 'index_vendor_admin_page' %}" class="admin_hello" style="margin: 0px 5px;">Go to Vendor Portal</a>
                <a href="{% url 'logged_out_admin' %}" class="logout_btn">Logout</a>
            </div>
        </div>
    </div>
    <!-- navigation bar End -->

    <!-- side bar start -->
    <div class="sc_sidebar_list">
        <div class="sc_sidebar">
            <a href="{% url 'index_admin' %}"><i class="fas fa-rupee-sign"></i>Dashboard</a>
            <a href="{% url 'sb_product_admin' %}"><i class="fas fa-barcode"></i>Products</a>
            <a class="active" href="{% url 'sb_images_admin' %}"><i class="fas fa-plus-circle"></i>Images</a>
            <a href="{% url 'sb_ads_admin' %}"><i class="fas fa-mitten"></i>Ads</a>
            <a href="{% url 'sb_account_admin' %}"><i class="fas fa-users"></i>User Accounts</a>
            <a href="{% url 'sb_blog_admin' %}"><i class="fa-brands fa-blogger"></i>Blog</a>
        </div>
    </div>

    <!-- side bar End -->

    <div class="sc_content_container" id="order_tab">
        {% include 'admin_page/banner/banner.html' with slideshow_list=slideshow_list %}
    </div>


    <script src="{% static 'js/tabs.js' %}"></script>

    <script>
        window.CSRF_TOKEN = "{{ csrf_token }}";
        console.log(window.CSRF_TOKEN)

        var removeCartBtns = document.getElementsByClassName('fa-solid fa-xmark');

        for (i=0; i < removeCartBtns.length; i++){
            removeCartBtns[i].addEventListener('click', function(){
                var imageproductid = this.dataset.imageproductid;
                console.log('imageproductid:',imageproductid)
                delete_images(imageproductid)
            })
        }

        function delete_images(productId){
            var url = '{% url 'sb_del_images_admin' %}'

            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type':'application/json',
                    'X-CSRFToken': window.CSRF_TOKEN,
                },
                body:JSON.stringify({'productId':productId})
            })
            .then((response) => {
                return response.json()
            })
            .then((data) => {
                if (data['_actr'] == 'True')
                    location.reload();
            })
        }

    </script>
</body>

</html>